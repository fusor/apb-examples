FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogd29yZHByZXNzLWhhLWFwYgppbWFnZTogYW5zaWJsZXBsYXlib29rYnVuZGxlL3dvcmRw\
cmVzcy1oYS1hcGIKZGVzY3JpcHRpb246IEhpZ2ggQXZhaWxhYmlsaXR5IFdvcmRwcmVzcyBBUEIK\
YmluZGFibGU6IFRydWUKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOiAKICBkb2N1bWVudGF0aW9u\
VXJsOiBodHRwczovL3dvcmRwcmVzcy5vcmcvCiAgbG9uZ0Rlc2NyaXB0aW9uOiBBbiBhcGIgdGhh\
dCBkZXBsb3lzIEhpZ2ggQXZhaWxhYmlsaXR5IFdvcmRwcmVzcwogIGRlcGVuZGVuY2llczogWydx\
dWF5LmlvL2NvcmVvcy9ldGNkOmxhdGVzdCcsICdwZXJjb25hbGFiL3BlcmNvbmEteHRyYWRiLWNs\
dXN0ZXI6NS42JywgJ3dvcmRwcmVzcyddCiAgZGlzcGxheU5hbWU6IFdvcmRwcmVzcy1IQSAoQVBC\
KQogIGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogaWNvbi13b3JkcHJlc3MKcGxhbnM6\
CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgSGln\
aCBBdmFpbGFiaWxpdHkgV29yZHByZXNzCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAg\
ICAgZGlzcGxheU5hbWU6IERlZmF1bHQKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBUaGlzIHBsYW4g\
cHJvdmlkZXMgSGlnaCBBdmFpbGFiaWxpdHkgV29yZHByZXNzCiAgICAgIGNvc3Q6ICQwLjAwCiAg\
ICBwYXJhbWV0ZXJzOiAKICAgICAgLSBuYW1lOiByb290X3Bhc3N3b3JkCiAgICAgICAgZGVmYXVs\
dDogazhzcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogZGF0YWJh\
c2Ugcm9vdCBwYXNzd29yZAogICAgICAtIG5hbWU6IHh0cmFiYWNrdXBfcGFzc3dvcmQKICAgICAg\
ICBkZWZhdWx0OiBrOHNwYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxl\
OiBiYWNrdXAgcGFzc3dvcmQKICAgICAgLSBuYW1lOiBjbHVzdGVyX25hbWUKICAgICAgICBkZWZh\
dWx0OiBwZXJjb25hCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IHBlcmNvbmEg\
Y2x1c3RlciBuYW1lCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgLSBuYW1lOiBkYXRhYmFz\
ZV91c2VyCiAgICAgICAgZGVmYXVsdDogcm9vdAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IHRpdGxlOiBkYXRhYmFzZSB1c2VyIG5hbWUKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAt\
IG5hbWU6IGRhdGFiYXNlX3Bhc3N3b3JkCiAgICAgICAgZGVmYXVsdDogazhzcGFzc3dvcmQKICAg\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogZGF0YWJhc2UgdXNlciBwYXNzd29yZAog\
ICAgICAtIG5hbWU6IGRhdGFiYXNlX3JlcGxpY2FzCiAgICAgICAgZGVmYXVsdDogMwogICAgICAg\
IHR5cGU6IGludAogICAgICAgIHRpdGxlOiBudW1iZXIgb2YgZGF0YWJhc2Ugbm9kZXMKICAgICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6IG1pbl93b3JkcHJlc3NfcmVwbGljYXMKICAg\
ICAgICBkZWZhdWx0OiA1CiAgICAgICAgdHlwZTogaW50CiAgICAgICAgdGl0bGU6IG1pbmltdW0g\
d29yZHByZXNzIHJlcGxpY2FzCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgLSBuYW1lOiBt\
YXhfd29yZHByZXNzX3JlcGxpY2FzCiAgICAgICAgZGVmYXVsdDogMTAKICAgICAgICB0eXBlOiBp\
bnQKICAgICAgICB0aXRsZTogbWF4aW11bSB3b3JkcHJlc3MgcmVwbGljYXMKICAgICAgICByZXF1\
aXJlZDogVHJ1ZQo="
COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chown -R apb /opt/{ansible,apb} \
    && chmod -R g=u /opt/{ansible,apb}

USER apb
