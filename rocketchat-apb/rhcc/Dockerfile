FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogcm9ja2V0Y2hhdC1yaC1hcGIKaW1hZ2U6IG9wZW5zaGlmdDMvcm9ja2V0Y2hhdC1yaC1h\
cGIKZGVzY3JpcHRpb246IFRoaXMgQVBCIGRlcGxveXMgUm9ja2V0Q2hhdCBiYWNrZWQgYnkgTW9u\
Z29EQgpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOiAKICBkb2N1bWVu\
dGF0aW9uVXJsOiBodHRwczovL3JvY2tldC5jaGF0CiAgaW1hZ2VVcmw6IGh0dHBzOi8vZ2l0aHVi\
LmNvbS9Sb2NrZXRDaGF0L1JvY2tldC5DaGF0LkFydHdvcmsvYmxvYi9tYXN0ZXIvTG9nb3Mvcm9j\
a2V0Y2F0LnBuZz9yYXc9dHJ1ZQogIGRlcGVuZGVuY2llczogWydyZWdpc3RyeS5jb25uZWN0LnJl\
ZGhhdC5jb20vcm9ja2V0Y2hhdC9yb2NrZXRjaGF0OmxhdGVzdCcsICdyZWdpc3RyeS5hY2Nlc3Mu\
cmVkaGF0LmNvbS9yaHNjbC9tb25nb2RiLTMyLXJoZWw3J10KICBkaXNwbGF5TmFtZTogUm9ja2V0\
Q2hhdCBSSCAoQVBCKQogIGxvbmdEZXNjcmlwdGlvbjogQW4gQVBCIHRoYXQgZGVwbG95cyBSb2Nr\
ZXRDaGF0IHRvIE9wZW5TaGlmdCBiYWNrZWQgYnkgTW9uZ29EQgpwbGFuczoKICAtIG5hbWU6IGRl\
ZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIHNpbmdsZSBSb2NrZXRD\
aGF0IGFwcGxpY2F0aW9uIGJhY2tlZCBieSBNb25nb0RCCiAgICBmcmVlOiBUcnVlCiAgICBtZXRh\
ZGF0YToKICAgICAgZGlzcGxheU5hbWU6IERlZmF1bHQKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBU\
aGlzIHBsYW4gcHJvdmlkZXMgYSBSb2NrZXRDaGF0IGFwcGxpY2F0aW9uIGJhY2tlZCBieSBNb25n\
b0RCCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAKICAgICAgLSBuYW1lOiBtb25n\
b2RiX3VzZXIKICAgICAgICBkZWZhdWx0OiByb2NrZXRjaGF0CiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgdGl0bGU6IE1vbmdvREIgVXNlcm5hbWUKICAgICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICAtIG5hbWU6IG1vbmdvZGJfcGFzcwogICAgICAgIGRlZmF1bHQ6IGNoYW5nZW1lCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IE1vbmdvREIgUGFzc3dvcmQKICAgICAgICBy\
ZXF1aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6IG1vbmdvZGJfbmFtZQogICAgICAgIGRlZmF1bHQ6\
IHJvY2tldGNoYXQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogTW9uZ29EQiBE\
YXRhYmFzZSBOYW1lCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgLSBuYW1lOiBtb25nb2Ri\
X2FkbWluX3Bhc3MKICAgICAgICBkZWZhdWx0OiBjaGFuZ2VtZQogICAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICAgIHRpdGxlOiBNb25nb0RCIEFkbWluIFBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6\
IFRydWUKICAgICAgLSBuYW1lOiBtb25nb2RiX3ZlcnNpb24KICAgICAgICBkZWZhdWx0OiAiMy4y\
IgogICAgICAgIGVudW06IFsnMy4yJywgJzIuNiddCiAgICAgICAgdHlwZTogZW51bQogICAgICAg\
IHRpdGxlOiBNb25nb0RCIFZlcnNpb24KICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5h\
bWU6IHJvY2tldGNoYXRfdmVyc2lvbgogICAgICAgIGRlZmF1bHQ6IGxhdGVzdAogICAgICAgIGVu\
dW06IFsnbGF0ZXN0JywgJzAuNTYuMCddCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIHRpdGxl\
OiBSb2NrZXRDaGF0IFZlcnNpb24KICAgICAgICByZXF1aXJlZDogVHJ1ZQo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
