FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogcm9ja2V0Y2hhdC1hcGIKaW1hZ2U6IGFuc2libGVwbGF5Ym9va2J1bmRsZS9yb2NrZXRj\
aGF0LWFwYgpkZXNjcmlwdGlvbjogVGhpcyBBUEIgZGVwbG95cyBSb2NrZXRDaGF0IGJhY2tlZCBi\
eSBNb25nb0RCCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6IAogIGRv\
Y3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vcm9ja2V0LmNoYXQKICBpbWFnZVVybDogaHR0cHM6Ly9n\
aXRodWIuY29tL1JvY2tldENoYXQvUm9ja2V0LkNoYXQuQXJ0d29yay9ibG9iL21hc3Rlci9Mb2dv\
cy9yb2NrZXRjYXQucG5nP3Jhdz10cnVlCiAgZGVwZW5kZW5jaWVzOiBbJ3JvY2tldC5jaGF0Omxh\
dGVzdCcsICdtb25nbzozLjInXQogIGRpc3BsYXlOYW1lOiBSb2NrZXRDaGF0IChBUEIpCiAgbG9u\
Z0Rlc2NyaXB0aW9uOiBBbiBBUEIgdGhhdCBkZXBsb3lzIFJvY2tldENoYXQgdG8gT3BlblNoaWZ0\
IGJhY2tlZCBieSBNb25nb0RCCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRp\
b246IFRoaXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIFJvY2tldENoYXQgYXBwbGljYXRpb24gYmFj\
a2VkIGJ5IE1vbmdvREIKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5\
TmFtZTogRGVmYXVsdAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBwcm92aWRlcyBh\
IFJvY2tldENoYXQgYXBwbGljYXRpb24gYmFja2VkIGJ5IE1vbmdvREIKICAgICAgY29zdDogJDAu\
MDAKICAgIHBhcmFtZXRlcnM6IAogICAgICAtIG5hbWU6IG1vbmdvZGJfdXNlcgogICAgICAgIGRl\
ZmF1bHQ6IHJvY2tldGNoYXQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogTW9u\
Z29EQiBVc2VybmFtZQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIC0gbmFtZTogbW9uZ29k\
Yl9wYXNzCiAgICAgICAgZGVmYXVsdDogY2hhbmdlbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgICB0aXRsZTogTW9uZ29EQiBQYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAg\
IC0gbmFtZTogbW9uZ29kYl9uYW1lCiAgICAgICAgZGVmYXVsdDogcm9ja2V0Y2hhdAogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBNb25nb0RCIERhdGFiYXNlIE5hbWUKICAgICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6IG1vbmdvZGJfYWRtaW5fcGFzcwogICAgICAg\
IGRlZmF1bHQ6IGNoYW5nZW1lCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IE1v\
bmdvREIgQWRtaW4gUGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6\
IG1vbmdvZGJfdmVyc2lvbgogICAgICAgIGRlZmF1bHQ6ICIzLjIiCiAgICAgICAgZW51bTogWycz\
LjInLCAnMy40JywgJzMuNSddCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIHRpdGxlOiBNb25n\
b0RCIFZlcnNpb24KICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6IHJvY2tldGNo\
YXRfdmVyc2lvbgogICAgICAgIGRlZmF1bHQ6IGxhdGVzdAogICAgICAgIGVudW06IFsnbGF0ZXN0\
JywgJzAuNTYuMCddCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIHRpdGxlOiBSb2NrZXRDaGF0\
IFZlcnNpb24KICAgICAgICByZXF1aXJlZDogVHJ1ZQo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
