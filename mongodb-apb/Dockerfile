FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"LS0tCiMgUGFyYW1ldGVycyBzaGFyZWQgYW1vbmcgcGxhbnMKX3BhcmFtczogJl9wYXJhbXMKICAt\
IG5hbWU6IG1lbW9yeV9saW1pdAogICAgZGVmYXVsdDogNTEyTWkKICAgIHRpdGxlOiBNYXhpbXVt\
IGFtb3VudCBvZiBtZW1vcnkgdGhlIGNvbnRhaW5lciBjYW4gdXNlLgogICAgdHlwZTogc3RyaW5n\
CiAgLSBuYW1lOiBuYW1lc3BhY2UKICAgIGRlZmF1bHQ6CiAgICB0aXRsZTogVGhlIE9wZW5TaGlm\
dCBOYW1lc3BhY2Ugd2hlcmUgdGhlIEltYWdlU3RyZWFtIHJlc2lkZXMuCiAgICB0eXBlOiBzdHJp\
bmcKICAtIG5hbWU6IHNlcnZpY2VfbmFtZQogICAgZGVmYXVsdDogbW9uZ29kYgogICAgdGl0bGU6\
IFRoZSBuYW1lIG9mIHRoZSBPcGVuU2hpZnQgU2VydmljZSBleHBvc2VkIGZvciB0aGUgZGF0YWJh\
c2UuCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IG1vbmdvZGJfdXNlcgogICAgZGVmYXVsdDoK\
ICAgIHRpdGxlOiBVc2VybmFtZSBmb3IgTW9uZ29EQiB1c2VyIHRoYXQgd2lsbCBiZSB1c2VkIGZv\
ciBhY2Nlc3NpbmcgdGhlIGRhdGFiYXNlLgogICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiBtb25n\
b2RiX3Bhc3N3b3JkCiAgICBkZWZhdWx0OgogICAgdGl0bGU6IFBhc3N3b3JkIGZvciB0aGUgTW9u\
Z29EQiBjb25uZWN0aW9uIHVzZXIuCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IG1vbmdvZGJf\
ZGF0YWJhc2UKICAgIGRlZmF1bHQ6IHNhbXBsZWRiCiAgICB0aXRsZTogTmFtZSBvZiB0aGUgTW9u\
Z29EQiBkYXRhYmFzZSBhY2Nlc3NlZC4KICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogbW9uZ29k\
Yl9hZG1pbl9wYXNzd29yZAogICAgZGVmYXVsdDoKICAgIHRpdGxlOiBQYXNzd29yZCBmb3IgdGhl\
IGRhdGFiYXNlIGFkbWluIHVzZXIuCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHZvbHVtZV9j\
YXBhY2l0eQogICAgZGVmYXVsdDogMUdpCiAgICB0aXRsZTogVm9sdW1lIHNwYWNlIGF2YWlsYWJs\
ZSBmb3IgZGF0YSwgZS5nLiA1MTJNaSwgMkdpLgogICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiBt\
b25nb2RiX3ZlcnNpb24KICAgIGRlZmF1bHQ6IDMuMgogICAgdGl0bGU6IFZlcnNpb24gb2YgTW9u\
Z29EQiBpbWFnZSB0byBiZSB1c2VkICgyLjQsIDIuNiwgMy4yIG9yIGxhdGVzdCkuCiAgICB0eXBl\
OiBzdHJpbmcKCm5hbWU6IG1vbmdvZGItYXBiCmltYWdlOiBhbnNpYmxlcGxheWJvb2tidW5kbGUv\
bW9uZ29kYi1hcGIKZGVzY3JpcHRpb246IFRoaXMgdGVtcGxhdGUgcHJvdmlkZXMgYSBzdGFuZGFs\
b25lIE1vbmdvREIgc2VydmVyIHdpdGggYSBkYXRhYmFzZSBjcmVhdGVkLiAgVGhlIGRhdGFiYXNl\
IGlzIHN0b3JlZCBvbiBwZXJzaXN0ZW50IHN0b3JhZ2UuICBUaGUgZGF0YWJhc2UgbmFtZSwgdXNl\
cm5hbWUsIGFuZCBwYXNzd29yZCBhcmUgY2hvc2VuIHZpYSBwYXJhbWV0ZXJzIHdoZW4gcHJvdmlz\
aW9uaW5nIHRoaXMgc2VydmljZS4KYmluZGFibGU6IFRydWUKYXN5bmM6IG9wdGlvbmFsCnRhZ3M6\
CiAgLSBkYXRhYmFzZXMKICAtIG1vbmdvZGIKbWV0YWRhdGE6CiAgZG9jdW1lbnRhdGlvblVybDog\
aHR0cHM6Ly9hY2Nlc3MucmVkaGF0LmNvbQogIGRpc3BsYXlOYW1lOiBNb25nb0RCIChQZXJzaXN0\
ZW50KQogIGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFzczogaWNvbi1tb25nb2RiCiAgbG9u\
Z0Rlc2NyaXB0aW9uOiBUaGlzIHRlbXBsYXRlIHByb3ZpZGVzIGEgc3RhbmRhbG9uZSBNb25nb0RC\
IHNlcnZlciB3aXRoIGEgZGF0YWJhc2UgY3JlYXRlZC4gIFRoZSBkYXRhYmFzZSBpcyBzdG9yZWQg\
b24gcGVyc2lzdGVudCBzdG9yYWdlLiAgVGhlIGRhdGFiYXNlIG5hbWUsIHVzZXJuYW1lLCBhbmQg\
cGFzc3dvcmQgYXJlIGNob3NlbiB2aWEgcGFyYW1ldGVycyB3aGVuIHByb3Zpc2lvbmluZyB0aGlz\
IHNlcnZpY2UuCnBsYW5zOgogIC0gbmFtZTogZGV2CiAgICBkZXNjcmlwdGlvbjogVGhpcyBkZWZh\
dWx0IHBsYW4gZGVwbG95cyBtb25nb2RiCiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0YToKICAg\
ICAgZGlzcGxheU5hbWU6IERlZmF1bHQKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBUaGlzIHBsYW4g\
ZGVwbG95cyBNb25nb2RiCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAqX3BhcmFt\
cwogIC0gbmFtZTogcHJvZAogICAgZGVzY3JpcHRpb246IFRoaXMgcHJvZHVjdGlvbiBwbGFuIGRl\
cGxveXMgbW9uZ29kYgogICAgZnJlZTogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlO\
YW1lOiBEZWZhdWx0CiAgICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgTW9u\
Z29kYiB3aXRoIGEgcGVyc2lzdGVudCB2b2x1bWUKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFt\
ZXRlcnM6ICpfcGFyYW1zCg=="






COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
